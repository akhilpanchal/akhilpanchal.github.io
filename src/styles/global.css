@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* Configure dark mode variant to work with .dark class on html element */
@variant dark (.dark &);

/* Define Tailwind theme variables for radius and fonts */
@theme {
    --radius: 0.625rem;
    
    /* Modern system font stack - no custom fonts needed */
    --font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

/* Shadcn semantic color variables (for custom CSS usage) */
@layer base {
    :root {
        --background: oklch(1 0 0);
        --foreground: oklch(0.145 0 0);
        --card: oklch(1 0 0);
        --card-foreground: oklch(0.145 0 0);
        --popover: oklch(1 0 0);
        --popover-foreground: oklch(0.145 0 0);
        --primary: oklch(0.205 0 0);
        --primary-foreground: oklch(0.985 0 0);
        --secondary: oklch(0.97 0 0);
        --secondary-foreground: oklch(0.205 0 0);
        --muted: oklch(0.97 0 0);
        --muted-foreground: oklch(0.556 0 0);
        --accent: oklch(0.97 0 0);
        --accent-foreground: oklch(0.205 0 0);
        --destructive: oklch(0.577 0.245 27.325);
        --destructive-foreground: oklch(0.985 0 0);
        --border: oklch(0.922 0 0);
        --input: oklch(0.922 0 0);
        --ring: oklch(0.708 0 0);
        --chart-1: oklch(0.646 0.222 41.116);
        --chart-2: oklch(0.6 0.118 184.704);
        --chart-3: oklch(0.398 0.07 227.392);
        --chart-4: oklch(0.828 0.189 84.429);
        --chart-5: oklch(0.769 0.188 70.08);
    }

    .dark {
        --background: oklch(0.145 0 0);
        --foreground: oklch(0.985 0 0);
        --card: oklch(0.205 0 0);
        --card-foreground: oklch(0.985 0 0);
        --popover: oklch(0.205 0 0);
        --popover-foreground: oklch(0.985 0 0);
        --primary: oklch(0.922 0 0);
        --primary-foreground: oklch(0.205 0 0);
        --secondary: oklch(0.269 0 0);
        --secondary-foreground: oklch(0.985 0 0);
        --muted: oklch(0.269 0 0);
        --muted-foreground: oklch(0.708 0 0);
        --accent: oklch(0.269 0 0);
        --accent-foreground: oklch(0.985 0 0);
        --destructive: oklch(0.704 0.191 22.216);
        --destructive-foreground: oklch(0.985 0 0);
        --border: oklch(1 0 0 / 10%);
        --input: oklch(1 0 0 / 15%);
        --ring: oklch(0.556 0 0);
        --chart-1: oklch(0.488 0.243 264.376);
        --chart-2: oklch(0.696 0.17 162.48);
        --chart-3: oklch(0.769 0.188 70.08);
        --chart-4: oklch(0.627 0.265 303.9);
        --chart-5: oklch(0.645 0.246 16.439);
    }
    
    /* Apply background and foreground to body automatically */
    body {
        background-color: var(--background);
        color: var(--foreground);
        font-family: var(--font-sans);
        /* Enable font smoothing for better rendering */
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        /* Enable ligatures and contextual alternates for better typography */
        font-feature-settings: 'rlig' 1, 'calt' 1;
        /* Optimize text rendering */
        text-rendering: optimizeLegibility;
    }
    
    /* Apply mono font to code elements */
    code, kbd, samp, pre {
        font-family: var(--font-mono);
        /* Disable ligatures in code for clarity */
        font-feature-settings: normal;
    }
}

/* Map shadcn semantic variables to Tailwind's color namespace
   This tells Tailwind to auto-generate all color utilities (bg-*, text-*, border-*, etc.)
   Using 'inline' resolves var() references at build time for proper CSS variable resolution */
@theme inline {
    --color-background: var(--background);
    --color-foreground: var(--foreground);
    --color-card: var(--card);
    --color-card-foreground: var(--card-foreground);
    --color-popover: var(--popover);
    --color-popover-foreground: var(--popover-foreground);
    --color-primary: var(--primary);
    --color-primary-foreground: var(--primary-foreground);
    --color-secondary: var(--secondary);
    --color-secondary-foreground: var(--secondary-foreground);
    --color-muted: var(--muted);
    --color-muted-foreground: var(--muted-foreground);
    --color-accent: var(--accent);
    --color-accent-foreground: var(--accent-foreground);
    --color-destructive: var(--destructive);
    --color-destructive-foreground: var(--destructive-foreground);
    --color-border: var(--border);
    --color-input: var(--input);
    --color-ring: var(--ring);
    --color-chart-1: var(--chart-1);
    --color-chart-2: var(--chart-2);
    --color-chart-3: var(--chart-3);
    --color-chart-4: var(--chart-4);
    --color-chart-5: var(--chart-5);
}

/* Custom utilities that Tailwind doesn't provide by default */
@layer utilities {
    /* Post content styling */
    .post-content {
        text-align: justify;
    }
    
    /* Line clamp utilities for truncating text */
    .line-clamp-1 {
        overflow: hidden;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 1;
        line-clamp: 1;
    }
    
    .line-clamp-2 {
        overflow: hidden;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
        line-clamp: 2;
    }
    
    .line-clamp-3 {
        overflow: hidden;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 3;
        line-clamp: 3;
    }
}

/* Customize prose styles for blog posts */
@layer base {
    /* Light mode prose customization */
    .prose {
        --tw-prose-body: var(--foreground);
        --tw-prose-headings: var(--foreground);
        --tw-prose-links: var(--primary);
        --tw-prose-bold: var(--foreground);
        --tw-prose-counters: var(--muted-foreground);
        --tw-prose-bullets: var(--muted-foreground);
        --tw-prose-hr: var(--border);
        --tw-prose-quotes: var(--foreground);
        --tw-prose-quote-borders: var(--border);
        --tw-prose-captions: var(--muted-foreground);
        --tw-prose-code: var(--foreground);
        --tw-prose-pre-code: var(--foreground);
        --tw-prose-pre-bg: var(--muted);
        --tw-prose-th-borders: var(--border);
        --tw-prose-td-borders: var(--border);
    }
    
    /* Dark mode prose customization */
    .dark .prose {
        --tw-prose-body: var(--foreground);
        --tw-prose-headings: var(--foreground);
        --tw-prose-links: var(--primary);
        --tw-prose-bold: var(--foreground);
        --tw-prose-counters: var(--muted-foreground);
        --tw-prose-bullets: var(--muted-foreground);
        --tw-prose-hr: var(--border);
        --tw-prose-quotes: var(--foreground);
        --tw-prose-quote-borders: var(--border);
        --tw-prose-captions: var(--muted-foreground);
        --tw-prose-code: var(--foreground);
        --tw-prose-pre-code: var(--foreground);
        --tw-prose-pre-bg: var(--muted);
        --tw-prose-th-borders: var(--border);
        --tw-prose-td-borders: var(--border);
    }
    
    /* Additional prose enhancements */
    .prose img {
        border-radius: var(--radius);
        margin-top: 2rem;
        margin-bottom: 2rem;
    }
    
    .prose a {
        text-decoration-thickness: 1px;
        text-underline-offset: 2px;
        transition: color 0.2s ease;
    }
    
    .prose a:hover {
        color: var(--primary);
        opacity: 0.8;
    }
    
    .prose h3 {
        scroll-margin-top: 6rem;
    }
}